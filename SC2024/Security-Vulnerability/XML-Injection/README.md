# XML Injection

이 실습은 SR1-2: XML 조회 및 결과 검증에 해당하는 공격인 XML Injection을 구현하고 방지하는 공부하기 위해 만들어졌다. 

취약한 SQL 쿼리를 통해 인젝션 공격을 시도하고, 필터링과 바인딩된 쿼리 방식(Prepared Statement와 유사)을 적용하여 인젝션 공격을 방지하자!

## 실습 방법
### 1. 설치
다음 명령어를 사용해 필요한 Python 패키지 설치한 후 코드를 실행시킨다. 
```bash
pip install flask
pip install lxml
```

### 2. SQL 인젝션 공격
1. http://localhost:5000/xml_query 에 접속한다. 
2. 음식 이름에 BelgianWaffles 또는 StrawberryBelgianWaffles을 입력하면 해당 음식의 정보만 나온다
3. 음식 이름명에 ```a' or '1'='1```을 입력하면 전체 음식의 정보가 나온다. 
   
    => ```//food[name/text()='a' or '1'='1']'```

### 3. XML 인젝션 공격 방지 (입력 필터링 및 바인딩된 쿼리 방식 적용)
1. http://localhost:5000/safe_xml_query 에 접속한다. 
2. 음식 이름에 특수문자 (예: ', ", [, ], =) 또는 허용되지 않은 값을 입력하면, 필터링이 적용되어 공격이 차단된다
   
    => ```//food[name/text()='BelgianWaffles']'```
3. 안전한 바인딩 방식 : 쿼리문이 외부 입력에 의해 변조되지 않도록, 미리 허용된 음식 이름 목록(```allowed_names```)에만 해당하는 입력을 처리한다. 